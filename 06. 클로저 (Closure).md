이번 글에서는 클로저에 대해 알아보도록 하죠.

클로저는 정말 단순하게 **"코드 블럭"**이라 이해하면 됩니다. 정말 그게 끝입니다.

```swift
// sum이라는 상수에 클로저를 할당하는 예시
let sum: (Int, Int) -> Int = { (a: Int, b: Int) in 
        return a + b
}

let someResult: Int = sum(1, 2)

// 선언해둔 클로저값을 함수의 전달인자로 사용가능
func calculate(a: Int, b: Int, method: (Int, Int) -> Int) -> Int {
        return method(a, b)
}

var result: Int
result = calculate(a: 50, b: 20, method: sum)
print(result)     // 70
```

코드 블럭이 무슨 말인지 잘 이해가 안된다면,

클로저를 **"이름 없는 함수"**라고 생각하면 더 좋습니다 ^__^

**함수는 이름 "있는" 클로저**, **클로저는 이름 "없는" 함수 :)**

!https://blog.kakaocdn.net/dn/cgJXmI/btrczKsDb2R/Kw3S2HCBOqEGcl8EVrHtI0/img.png

!https://blog.kakaocdn.net/dn/dnri8f/btrcFUOmsT1/tl8pdu7y0ggnXSXM7sFSF0/img.png

왼쪽이 함수, 오른쪽이 클로저이지만, 두개는 모두 더하기라는 같은 동작을 수행합니다.

클로저에서 중요한 점은, 클로저를 활용해서 **데이터를 선언할 수도, 클로저가 함수의 매개변수가 될 수도, 함수의 반환값이 될 수도, 비교연산을 적용할 수도** 있다는 점입니다!

대신, 많은 초보 iOS 개발자가 클로저를 생소해하고 어려워하는 이유는

**"클로저를 작성하는 방법이 매우 다양하기"** 때문인데, 오늘도 하나씩 같이 확인해봅시다 :)

### 1) 후행 클로저

클로저 표현식이 함수의 마지막 전달인 경우, 마지막 인수 라벨을 작성하지 않습니다.

그리고, 함수 소괄호 외부에 클로저를 구현할 수 있습니다.

```swift
// #1. 후행 클로저
// 클로저가 함수의 마지막 전달인자라면, 마지막 매개변수를 생략해서 함수 소괄호 외부에 구현할 수 있음

result = calculate(a: 10, b: 20**, method: {** (left: Int, right: Int) -> Int in
        return left + right
})
print(result)     // 30

// 후행 클로저
result = calculate(a: 10, b: 20) { (left: Int, right: Int) -> Int in    
        return left + right
}
print(result)     // 30
```

### 2) 반환타입 생략

컴파일러 상에서 어떤 타입을 반환할 지 알고 있다면,

클로저에서는 반환타입 (-> Int 부분)을 명시해주지 않아도 됩니다! 

대신, **in 키워드**는 생략할 수 없다고 합니다 ^__^

```swift
// #2. 반환타입 생략
// 컴파일러 상에서 어떤 타입을 반환할지 알고 있다면, 클로저에는 반환타입을 명시하지 않아도 가능함

// 생략 전
result = calculate(a: 10, b: 20) { (left: Int, right: Int) **-> Int** in    
        return left + right
}
// 생략 후
result = calculate(a: 10, b: 20) { (left: Int, right: Int) in    
        return left + right
}
```

### 3) 단축인자 이름

프로젝트를 하면서 iOS 선배님들의 코드를 뜯어보다 보면

어렵고 이해가 안됬던 부분이 $0, $1, $2 처럼 뜬금없이 달러(?)가 쓰인 곳이었는데,

이 부분에 대한 해답이 바로, **클로저의 단축 인자이름**이었습니다.

클로저에는 매개변수의 순서대로 이름대신 $0, $1, $2, $3을 사용해서 작성할 수 있습니다:)

```swift
// #3. 단축 인자이름
// 클로저 상에서 매개변수 이름이 필요하지 않다면, 단축인자 이름을 활용가능함
// 매개변수 순서대로, $0, $1...

// 기존
result = calculate(a: 10, b: 20) { (left: Int, right: Int) in    
        return left + right
}
// 단축 인자이름
result = calculate(a: 10, b: 20) {  
        return $0 + $1
}

```

### 4) 암시적 반환 표현

그리고 클로저에는 return을 쓰지 않아도, 암시적으로 **"마지막줄이 반환값"**이구나 하고 받아들인다고 합니다.

```swift
// #4. 암시적 반환 표현
// 클로저가 반환하는 값이 있다면, 마지막 줄의 결괏값은 return을 적지 않아도 암시적으로 반환값으로 취급

// 기존
result = calculate(a: 10, b: 20) {  
        return $0 + $1
}
// 암시적 반환 표현
result = calculate(a: 10, b: 20) { $0 + $1 }
```
